
<div class="edit-profile col-md-8">
    <div class="row">
        <h5 class="mt-4">Edit User Profile</h5>
        <hr class="w-100">
    </div>

    <div class="basic-info row justify-content-center mb-5">
        <%= form_with url: update_info_path, method: :put, class: "col-md-8" do |form|%>
            <div class="avatar d-flex justify-content-center">
                <%= image_tag "#{@user.avatar_url}", size: "180x180", alt: "avatar", id: "avatar" %>
                <%= form.file_field :avatar_url , onchange: "previewAvatar(this)"%>
                <div class="change-avatar">
                    Change
                </div>
            </div>

            <div class="form-group row mt-5">
                <div class="col-sm-8 offset-sm-4">
                    <p class="justify-content-center">Basic information</p>
                </div>
            </div>
            <div class="form-group row mt-3">
                <label for="inputFirstName" class="col-sm-4 col-form-label">First Name</label>
                <div class="col-sm-8">
                    <%= form.text_field :first_name, class: 'form-control', placeholder: "First Name", value: "#{current_user.first_name}"%>
                </div>
            </div>

            <div class="form-group row">
                <label for="inputLastName" class="col-sm-4 col-form-label">Last Name</label>
                <div class="col-sm-8">
                    <%= form.text_field :last_name, class: 'form-control', placeholder: "Last Name", value: "#{current_user.last_name}"%>
                </div>
            </div>

            <div class="form-group row">
                <label for="input Email" class="col-sm-4 col-form-label">Email</label>
                <div class="col-sm-8">
                    <%= form.text_field :email, class: 'form-control', placeholder: "Email", value: "#{current_user.email}"%>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-8 offset-sm-4">
                    <%= form.submit "Save",class: "btn btn-success"%>
                </div>
            </div>
        <% end %>
    </div>

    <div class="password row justify-content-center mt-5">
        <%= form_with url: update_password_path, method: :put, class: "col-md-8" do |form|%>
            <div class="form-group row">
                <div class="col-sm-8 offset-sm-4">
                    <p class="justify-content-center">Password</p>
                </div>
            </div>

            <div class="form-group row mt-3">
                <label for="inputCurrentPassword" class="col-sm-4 col-form-label">Current Password</label>
                <div class="col-sm-8">
                    <%= form.password_field :current_password, class: 'form-control', placeholder: "Password"%>
                </div>
            </div>

            <div class="form-group row">
                <label for="inputNewPassword" class="col-sm-4 col-form-label">New Password</label>
                <div class="col-sm-8">
                    <%= form.password_field :password, class: 'form-control', placeholder: "New Password"%>
                </div>
            </div>

            <div class="form-group row">
                <label for="inputPasswordConfirmation" class="col-sm-4 col-form-label">Password Confirmation </label>
                <div class="col-sm-8">
                    <%= form.password_field :password_confirmation, class: 'form-control', placeholder: "Password Confirmation"%>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-8 offset-sm-4">
                    <%= form.submit "Save",class: "btn btn-success"%>
                </div>
            </div>
        <% end %>
    </div>
</div>

<script>
    function previewAvatar(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            
            reader.onload = function (e) {
                $('.basic-info #avatar').attr('src', e.target.result)
                    .width(180)
                    .height(180);
            };     
            reader.readAsDataURL(input.files[0]);    
        }
    }
</script>





